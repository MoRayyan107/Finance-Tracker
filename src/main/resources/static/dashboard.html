<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance Tracker - Dashboard</title>
    <link rel="stylesheet" href="css/dashboard.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="header-left">
                <div class="app-title">💰 Finance Tracker</div>
                <div class="user-greeting">Hello! <span id="username">User</span></div>
            </div>

            <!-- Hamburger Menu -->
            <div class="menu-container">
                <button class="hamburger-btn" onclick="toggleMenu()">☰</button>
                <div class="dropdown-menu" id="dropdownMenu">
                    <a href="#" onclick="openProfile(event)">👤 My Profile</a>
                    <a href="#" onclick="openSettings(event)">⚙️ Settings</a>
                    <a href="#" onclick="openReports(event)">📊 Financial Reports</a>
                    <a href="#" onclick="changePassword(event)">🔐 Change Password</a>
                    <div class="dropdown-divider"></div>
                    <button class="logout" onclick="logout()">🚪 Logout</button>
                </div>
            </div>
        </header>

        <!-- Financial Summary Cards -->
        <div class="summary-section">
            <div class="summary-card income">
                <div class="summary-label">💵 Total Income</div>
                <div class="summary-amount" id="totalIncome">$0.00</div>
                <div class="summary-change positive" id="incomeChange">Loading...</div>
            </div>

            <div class="summary-card expenses">
                <div class="summary-label">💸 Total Expenses</div>
                <div class="summary-amount" id="totalExpenses">$0.00</div>
                <div class="summary-change negative" id="expensesChange">Loading...</div>
            </div>

            <div class="summary-card balance">
                <div class="summary-label">📊 Net Balance</div>
                <div class="summary-amount" id="netBalance">$0.00</div>
                <div class="summary-change positive" id="balanceChange">Loading...</div>
            </div>

            <div class="summary-card savings-rate">
                <div class="summary-label">📈 Savings Rate</div>
                <div class="summary-amount" id="savingsRate">0%</div>
                <div class="summary-change positive" id="savingsChange">Keep going!</div>
            </div>
        </div>

        <!-- Main Content: Two Columns -->
        <div class="main-content">
            <!-- Left: Pie Chart -->
            <div class="chart-card">
                <h2>Overall Spending</h2>
                <div class="chart-container">
                    <div class="pie-chart" id="pieChart"></div>
                </div>
                <div class="chart-legend">
                    <div class="legend-item">
                        <div class="legend-color expenses"></div>
                        <span>Expenses (<span id="expensePercent">0</span>%)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color income"></div>
                        <span>Income (<span id="incomePercent">0</span>%)</span>
                    </div>
                </div>
            </div>

            <!-- Right: Recent Transactions -->
            <div class="transactions-card">
                <h2>Recent Transactions</h2>
                <div class="transaction-list" id="transactionList">
                    <div class="loading">Loading transactions...</div>
                </div>
                <div class="action-links">
                    <a href="#" class="action-btn primary" onclick="addTransaction(event)">+ Add Transaction</a>
                    <a href="#" class="action-btn secondary" onclick="viewAllTransactions(event)">View All</a>
                </div>
            </div>
        </div>

        <!-- Bottom: Savings -->
        <div class="savings-section">
            <h2>💰 Savings</h2>
            <div class="action-links" style="margin-bottom: 20px;">
                <a href="#" class="action-btn primary" onclick="addSavings(event)">+ Add Savings</a>
            </div>
            <div class="savings-grid" id="savingsGrid">
                <div class="loading">Loading savings...</div>
            </div>
        </div>

        <!-- Add Transaction Modal -->
        <div id="addTransactionModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="modal-close" onclick="closeTransactionForm()">&times;</span>
                <h2>Add New Transaction</h2>
                <form id="transactionForm">
                    <input type="text" name="description" placeholder="Description" required />
                    <input type="number" name="amount" min="0" placeholder="Amount" step="0.01" required />
                    <input type="date" name="date" required />
                    <select name="transactionType" required>
                        <option value="" disabled>Select type</option>
                        <option value="INCOME">Income</option>
                        <option value="EXPENSE">Expense</option>
                    </select>
                    <input type="text" name="category" placeholder="Category" required />
                    <button type="submit">Add</button>
                </form>
            </div>
        </div>

        <!-- Add Savings Modal -->
        <div id="addSavingsModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="modal-close" onclick="closeSavingsForm()">&times;</span>
                <h2>Create New Savings</h2>
                <form id="savingsForm">
                    <label for="sv-name">Savings Name</label>
                    <input id="sv-name" type="text" name="savingsName" placeholder="e.g., Emergency Fund" required />

                    <label for="sv-description">Description</label>
                    <textarea id="sv-description" name="savingsDescription" placeholder="What is this savings for?" rows="3" required></textarea>

                    <label for="sv-current">Current Amount (optional)</label>
                    <input id="sv-current" type="number" name="currentAmount" placeholder="0.00" step="0.01" value="0" />

                    <label for="sv-target">Target Amount</label>
                    <input id="sv-target" type="number" name="targetAmount" placeholder="5000.00" step="0.01" required />

                    <button type="submit">Create Savings</button>
                </form>
            </div>
        </div>
    </div>

    <script src="js/dashboard.js"></script>
</body>
</html>